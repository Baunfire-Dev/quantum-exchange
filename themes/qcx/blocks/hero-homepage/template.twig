<section class="{{ block.slug }} {{ block.className }}">
  {% if block.anchor %}
    <div class="section-anchor" id="{{ block.anchor ?? block.id }}"></div>
  {% endif %}

  {# variation flags #}
  {% set variation = fields.variation ?? 'v1' %}
  {% set is_v2 = (variation == 'v2') %}
  {% set is_v3 = (variation == 'v3') %}

  {# shared tokens #}
  {% set contentPad = is_v2 ? 'pl-[6.875rem]' : (is_v3 ? 'lg:pl-[6.875rem] pl-0' : '~pl-[0rem]/[20.875rem]') %}
  {% set paraMax   = is_v2 ? 'max-w-[30.5rem]' : (is_v3 ? 'max-w-[30.5rem]' : 'sm:max-w-[20rem]') %}
  {% set gapClass  = is_v2 ? 'gap-[2rem]' : (is_v3 ? 'gap-[2rem]' : '~gap-[1.25rem]/[3.75rem]') %}

  <div class="relative {{ is_v2
      ? 'pt-[4.5rem] pb-[13.125rem]'
      : (is_v3 ? 'pt-[4.5rem] pb-[13.125rem]' : '~pt-[4.5rem]/[10.5rem] ~pb-[18.5rem]/[13.125rem]') }}">
    <div class="container relative z-[2]">
      <div class="flex flex-col {{ gapClass }}">
        {# Heading block (centered container, left-aligned text) #}
        {% if fields.heading.upper_text or fields.heading.lower_text %}
          <div class="flex flex-col items-start max-w-[68.0625rem] gap-[2rem]">
				{# Heading block (centered container, left-aligned text) #}
			{% if fields.heading.upper_text or fields.heading.lower_text %}
			<div class="flex flex-col items-start {{ is_v3 ? 'max-w-[68.0625rem] gap-[1rem] lg:gap-[2rem]' : 'max-w-[67.875rem]' }}">
				{% if fields.heading.upper_text %}
				<h1 class="upper-text alpha {{ is_v3 ? 'text-[2.25rem] leading-[1] font-[350] tracking-[-0.09rem] lg:text-[6rem] lg:tracking-[-0.18rem]' : '' }}">
					{{ fields.heading.upper_text }}
				</h1>
				{% endif %}
				{% if fields.heading.lower_text %}
				<h1 class="lower-text alpha {{ is_v3 ? 'text-[2.25rem] leading-[1] font-[350] tracking-[-0.09rem] lg:text-[6rem] lg:tracking-[-0.18rem]' : '' }}">
					{{ fields.heading.lower_text }}
				</h1>
				{% endif %}
			</div>
			{% endif %}


          </div>
        {% endif %}

        {# Paragraph + CTA wrapper #}
        {% if fields.paragraph or fields.cta %}
          <div class="content-group alpha flex flex-col {{ contentPad }} {{ is_v3 ? 'gap-[1.5rem]' : 'gap-[1.5rem]' }}">
            {% if fields.paragraph %}
              <p class="{{ paraMax }}">{{ fields.paragraph }}</p>
            {% endif %}

            {% include 'components/cta.twig' with {
              class : 'filled blue',
              cta: fields.cta
            } %}
          </div>
        {% endif %}
      </div>
    </div>

    {# v1: Vimeo #}
    {% if not is_v2 and not is_v3 and fields.vimeo_video_id %}
      <div class="media-container video" data-video="{{ fields.vimeo_video_id }}"></div>
    {% endif %}

    {# v2: Right-floating image #}
    {% if is_v2 and fields.image %}
      <div class="pointer-events-none select-none absolute right-[9.125rem] bottom-[0.8125rem] z-[1]">
        <img
          src="{{ fields.image.url }}"
          alt="{{ fields.image.alt ?: '' }}"
          class="block max-w-[26.6875rem] max-h-[23.6875rem] aspect-[427/379] object-contain"
          width="427" height="379" loading="lazy" decoding="async"
        />
      </div>
    {% endif %}

    {# v3: Right-floating self-hosted video #}
    {% if is_v3 and fields.video_url_self_hosted %}
      <div class="absolute right-[-27.375rem] md:right-[-13.375rem] bottom-[8rem] z-[1] mix-blend-multiply pointer-events-none select-none">
        <video
          class="block w-[45.375rem] h-[25.5rem] aspect-[121/68] object-cover"
          autoplay
          muted
          loop
          playsinline
          preload="metadata"
        >
          <source src="{{ fields.video_url_self_hosted }}" type="video/mp4" />
        </video>
      </div>
    {% endif %}
  </div>
</section>
